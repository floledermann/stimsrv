{% extends "base.html" %}

{% block title %}{{ experiment.name }}{% endblock %}

{% block bodyclass %}{% for role in roles %}has-role-{{role}} {% endfor %}{% endblock %}

{% block body %}
<style>
{{ experiment.css | safe }}
</style>

{# UI sections are rendered by client #}

<script src="/static/client-browser.js"></script>
{# TODO: package experiment on the fly / on startup #}
<script src="/static/experiment.js"></script>
<script>

let client = stimsrvClient({
  clientid: "{{device.id}}",
  role: {{ role | dump | safe }},
  device: {{ device | dump | safe }},
  clientTimestamps: experiment.settings?.clientTimestamps || false
});

client.connect();
client.run(experiment);
</script>

{% endblock %}